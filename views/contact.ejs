<% 
const body = `
<!-- Auth Check -->
<div id="authCheck" style="display: none;">
    <section class="auth-required">
        <div class="container">
            <div class="auth-required-content">
                <i class="fas fa-lock"></i>
                <h2>Login Required</h2>
                <p>You must be logged in to use the contact form.</p>
                <p class="help-text">Can't log in? Ask our AI support chatbot for help!</p>
                <div class="auth-actions">
                    <a href="/login" class="btn btn-primary btn-lg">
                        <i class="fas fa-sign-in-alt"></i> Login / Sign Up
                    </a>
                    <button onclick="toggleChatbot()" class="btn btn-secondary btn-lg">
                        <i class="fas fa-robot"></i> Ask AI Support
                    </button>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Contact Hero -->
<section class="contact-hero" id="contactContent">
    <div class="container">
        <h1>Get In Touch</h1>
        <p>Request your free hosting or ask us anything! We'll respond within 24 hours.</p>
    </div>
</section>

<!-- Contact Info Section -->
<section class="contact-info-section">
    <div class="container">
        <div class="info-text">
            <h2>How to Get Started with Free Hosting</h2>
            <p>
                Getting your website online with MasterHosting is simple and completely free! 
                We've made the process as straightforward as possible so you can focus on building 
                your website rather than dealing with complicated setup procedures.
            </p>
            
            <h3>Step 1: Choose Your Subdomain</h3>
            <p>
                Think about what subdomain you'd like for your website. Your subdomain will be in 
                the format: yourname.masterhostinig.online. Choose something memorable and relevant 
                to your website's purpose. For example: portfolio.masterhostinig.online, 
                shop.masterhostinig.online, or blog.masterhostinig.online.
            </p>
            
            <h3>Step 2: Fill Out the Contact Form</h3>
            <p>
                Use the contact form below to send us your hosting request. Include your desired 
                subdomain name and tell us a bit about your website. The more information you provide, 
                the better we can assist you in getting set up quickly.
            </p>
            
            <h3>Step 3: We'll Set You Up</h3>
            <p>
                Once we receive your request, our team will set up your hosting account within 24 hours. 
                We'll send you all the necessary information including your FTP credentials, control panel 
                access, and setup instructions via email.
            </p>
            
            <h3>What You Can Host</h3>
            <p>
                MasterHosting supports a wide variety of websites including:
            </p>
            <ul>
                <li><strong>Personal Portfolios:</strong> Showcase your work, skills, and achievements</li>
                <li><strong>Business Websites:</strong> Establish your business presence online</li>
                <li><strong>Blogs:</strong> Share your thoughts, ideas, and expertise</li>
                <li><strong>School Projects:</strong> Perfect for assignments and presentations</li>
                <li><strong>Landing Pages:</strong> Create professional landing pages for campaigns</li>
                <li><strong>Small E-commerce:</strong> Start your online store</li>
            </ul>
            
            <h3>Support & Response Time</h3>
            <p>
                We pride ourselves on providing excellent customer support. All inquiries are answered 
                within 24 hours, and most requests are handled much faster. Our AI chatbot is also 
                available 24/7 for instant answers to common questions.
            </p>
            
            <h3>Have Questions?</h3>
            <p>
                If you have any questions about our hosting service, features, or setup process, 
                don't hesitate to ask! We're here to help you succeed online. You can also check 
                out our FAQ section or chat with our AI assistant for instant answers.
            </p>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section class="contact-section">
    <div class="container">
        <div class="contact-grid">
            <!-- Contact Form -->
            <div class="contact-form-wrapper">
                <h2>Send Us a Message</h2>
                <form id="contactForm" class="contact-form">
                    <div class="form-group">
                        <label for="name">
                            <i class="fas fa-user"></i> Your Name
                        </label>
                        <input 
                            type="text" 
                            id="name" 
                            name="name" 
                            placeholder="Enter your name" 
                            required
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="email">
                            <i class="fas fa-envelope"></i> Your Email
                        </label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            placeholder="Enter your email address" 
                            required
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="message">
                            <i class="fas fa-comment"></i> Your Message
                        </label>
                        <textarea 
                            id="message" 
                            name="message" 
                            rows="8" 
                            placeholder="Tell us about your hosting needs or ask us anything..." 
                            required
                        ></textarea>
                        <small>Request your free hosting, choose your subdomain, or ask any questions!</small>
                    </div>
                    
                    <!-- Google reCAPTCHA -->
                    ${recaptchaSiteKey ? `
                    <div class="form-group">
                        <div class="g-recaptcha" data-sitekey="${recaptchaSiteKey}"></div>
                    </div>
                    ` : ''}
                    
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-paper-plane"></i> Send Message
                    </button>
                    
                    <div id="formMessage" class="form-message"></div>
                </form>
                
                <div class="team-signature">
                    <p><em>- MasterHosting Team</em></p>
                </div>
            </div>
            
            <!-- Contact Info -->
            <div class="contact-info-wrapper">
                <h2>Contact Information</h2>
                <p>Feel free to reach out through any of these channels:</p>
                
                <div class="contact-info-cards">
                    <div class="info-card">
                        <div class="info-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <h3>Email</h3>
                        <p>support@masterhostinig.online</p>
                        <a href="mailto:support@masterhostinig.online">Send Email</a>
                    </div>
                    
                    <div class="info-card">
                        <div class="info-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3>Support Hours</h3>
                        <p>24/7 Available</p>
                        <span>We're always here to help</span>
                    </div>
                    
                    <div class="info-card">
                        <div class="info-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <h3>Website</h3>
                        <p>masterhostinig.online</p>
                        <a href="/">Visit Homepage</a>
                    </div>
                </div>
                
                <div class="social-connect">
                    <h3>Connect With Us</h3>
                    <div class="social-buttons">
                        <a href="#" class="social-btn facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="social-btn twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-btn instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-btn linkedin">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="faq-section">
    <div class="container">
        <div class="section-header">
            <h2>Frequently Asked Questions</h2>
            <p>Quick answers to common questions</p>
        </div>
        
        <div class="faq-grid">
            <div class="faq-item">
                <h3><i class="fas fa-question-circle"></i> How do I get started?</h3>
                <p>Simply choose a plan, sign up, and you'll receive instructions to upload your website files. It takes just minutes!</p>
            </div>
            
            <div class="faq-item">
                <h3><i class="fas fa-question-circle"></i> Can I upgrade my plan later?</h3>
                <p>Absolutely! You can upgrade or downgrade your plan at any time from your account dashboard.</p>
            </div>
            
            <div class="faq-item">
                <h3><i class="fas fa-question-circle"></i> Is the subdomain really free?</h3>
                <p>Yes! Every plan includes a free subdomain like yourname.masterhostinig.online at no additional cost.</p>
            </div>
            
            <div class="faq-item">
                <h3><i class="fas fa-question-circle"></i> What payment methods do you accept?</h3>
                <p>We accept all major credit cards, PayPal, and various other payment methods for your convenience.</p>
            </div>
        </div>
    </div>
</section>

<script type="module">
// Check if user is logged in and redirect with proper auth parameter
import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

const auth = window.firebaseAuth;
const authCheck = document.getElementById('authCheck');
const contactContent = document.getElementById('contactContent');

// Get current URL params
const urlParams = new URLSearchParams(window.location.search);
const authParam = urlParams.get('auth');

onAuthStateChanged(auth, (user) => {
    if (!user) {
        // User is NOT logged in - redirect to login
        window.location.href = '/login';
    } else {
        // User IS logged in
        // Check if auth parameter is correct
        if (authParam !== 'true') {
            // Redirect with proper auth parameter
            window.location.href = '/contact?auth=true';
        } else {
            // Show contact form
            authCheck.style.display = 'none';
            contactContent.style.display = 'block';
        }
    }
});

// Prevent manual URL manipulation
window.addEventListener('popstate', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const authParam = urlParams.get('auth');
    
    if (authParam === 'true' && !auth.currentUser) {
        // User tried to manually set auth=true without being logged in
        window.location.href = '/login';
    }
});

// Check on page load
if (authParam === 'true' && !auth.currentUser) {
    window.location.href = '/login';
}
</script>
`;
%>
<%- include('layout', { title, page, body }) %>
